<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Building Management Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --header-blue: #6264A7;
            --bg-dark: #d5dadd;
            --dashboard-bg: #ffffff;
            --box-bg: #f4f7fa;
            --border-color: #cbd5e1;
            --text-dark: #1e293b;
            --text-grey: #64748b;
            
            --blue-icon: #3b82f6;
            --green-icon: #22c55e;
            --red-alert: #ef4444;
            --orange-warn: #f59e0b;
            
            --bar-main: #3b82f6;
            --bar-broadcast: #64748b;
            --bar-cabin: #22c55e;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Arial Narrow', 'Segoe UI', Tahoma, sans-serif;
            user-select: none;
        }

        /* Full Screen Dynamic Setup (Desktop/TV) */
        body {
            background-color: var(--bg-dark);
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .dashboard-container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            background-color: #e2e8f0;
        }

        /* Header */
        header {
            background-color: var(--header-blue);
            color: white;
            padding: 1.2vh 2vw;
            display: flex;
            align-items: center;
            box-shadow: 0 0.5vh 1vh rgba(0,0,0,0.15);
            z-index: 10;
            height: 6.5vh;
        }
        .logo-a { font-size: 3.5vh; font-weight: 900; font-style: italic; margin-right: 1vw; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);}
        .header-title { font-size: 2.8vh; font-weight: bold; letter-spacing: 0.1vw; }
        .header-divider { margin: 0 1vw; font-weight: normal; opacity: 0.6;}

        /* Grid Layout */
        .grid {
            flex: 1;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 1.5vw;
            padding: 1.5vw;
            height: 93.5vh;
        }

        .column { display: flex; flex-direction: column; gap: 1.5vh; height: 100%; }

        .col-title {
            text-align: center;
            font-size: 2.2vh;
            font-weight: 900;
            color: var(--text-dark);
            background: white;
            padding: 1.2vh;
            border: 0.2vh solid var(--border-color);
            border-radius: 0.8vh;
            box-shadow: 0 0.4vh 0.8vh rgba(0,0,0,0.05);
            text-transform: uppercase;
        }

        /* Card Elements */
        .card {
            background: white;
            border: 0.2vh solid var(--border-color);
            border-radius: 1vh;
            padding: 1.5vh;
            display: flex;
            flex-direction: column;
            gap: 1vh;
            flex: 1; 
            box-shadow: 0 0.4vh 1vh rgba(0,0,0,0.08);
        }
        .card-inner {
            background: var(--box-bg);
            border: 0.2vh solid var(--border-color);
            border-radius: 0.8vh;
            padding: 1.5vh 2vw;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-evenly;
            align-items: center;
            text-align: center;
            width: 100%;
        }
        
        h4 { font-size: 1.8vh; font-weight: 800; color: var(--text-grey); text-transform: uppercase; width: 100%; }

        /* Interactivity */
        .interactive { transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1); cursor: pointer; position: relative; }
        .interactive:hover { transform: translateY(-0.5vh) scale(1.01); box-shadow: 0 1.5vh 3vh rgba(0,0,0,0.12); border-color: var(--blue-icon); background-color: #ffffff; z-index: 5;}
        .interactive:active { transform: translateY(0px) scale(0.98); box-shadow: 0 0.5vh 1vh rgba(0,0,0,0.1); }

        /* -- SPECIFIC WIDGETS -- */
        
        /* Occupancy */
        .occ-wrap { display: flex; align-items: center; justify-content: space-between; width: 100%; flex: 1; gap: 1vw;}
        .occ-wrap i { font-size: 8vh; color: var(--blue-icon); filter: drop-shadow(2px 4px 6px rgba(59, 130, 246, 0.3));}
        .occ-box { display: flex; flex-direction: column; justify-content: center; flex: 1; padding: 1.5vh 0; background: white; border: 0.2vh solid #bae6fd; border-radius: 0.8vh; box-shadow: inset 0 0 1vh rgba(0,0,0,0.02); }
        .occ-box h2 { font-size: 5.5vh; font-weight: 900; color: var(--text-dark); line-height: 1; }
        .occ-box span { font-size: 1.6vh; font-weight: bold; color: var(--text-grey); text-transform: uppercase; margin-top: 0.5vh;}

        /* Gauges */
        .gauge-row { display: flex; gap: 1vw; flex: 1.5; width: 100%;}
        .gauge-card { flex: 1; background: var(--box-bg); border: 0.2vh solid var(--border-color); border-radius: 0.8vh; padding: 1.5vh; display: flex; flex-direction: column; align-items: center; min-width: 0;}
        .gauge-container { width: 100%; flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: flex-end; position: relative; min-height: 0;}
        .canvas-wrapper { width: 100%; display: flex; justify-content: center; align-items: flex-end; flex: 1; min-height: 0;}
        .gauge-val { font-size: 3.5vh; font-weight: 900; color: var(--text-dark); margin-top: -1vh;}
        .gauge-icon { font-size: 2.5vh; color: var(--text-grey); margin-top: 0.5vh;}

        /* Air Quality - FIXED SPACING */
        .aq-wrap { display: flex; align-items: center; justify-content: center; gap: 2.5vw; width: 100%; flex: 1; padding: 0 1vw;}
        .aq-wrap i { font-size: 8vh; color: var(--blue-icon); filter: drop-shadow(2px 4px 6px rgba(59, 130, 246, 0.3));}
        .aq-text { display: flex; flex-direction: column; gap: 1vh; text-align: left; flex: 1;}
        .aq-text div { font-size: 2.4vh; font-weight: 900; color: var(--text-dark); display: flex; justify-content: space-between; gap: 1vw;}
        .aq-val-in { color: var(--blue-icon); font-size: 3vh;}
        .aq-val-out { color: var(--text-grey); font-size: 3vh;}

        /* Alerts & Energy */
        .alert-box { background: #fef2f2; border: 0.3vh solid #fca5a5; flex: 0.8; animation: pulse-border 2s infinite;}
        .alert-box i { font-size: 8vh; color: var(--red-alert); margin-bottom: 1vh; animation: pulse 1.5s infinite; }
        .alert-box h3 { font-size: 3.5vh; font-weight: 900; color: var(--red-alert); letter-spacing: 0.1vw;}

        .energy-wrap { display: flex; align-items: center; justify-content: center; gap: 2vw; width: 100%; flex: 1.2;}
        .energy-wrap i { font-size: 10vh; color: var(--orange-warn); filter: drop-shadow(2px 4px 6px rgba(245, 158, 11, 0.4));}
        .energy-text { text-align: left; }
        .energy-text h1 { font-size: 6.5vh; font-weight: 900; color: var(--text-dark); line-height: 1; letter-spacing: -0.1vw;}
        .energy-text p { font-size: 2vh; font-weight: bold; color: var(--text-grey); margin-top: 0.5vh; }

        .mini-stat { display: flex; align-items: center; justify-content: center; gap: 1.5vw; width: 100%; font-size: 2.8vh; color: var(--text-grey); font-weight: 600;}
        .mini-stat i { font-size: 5.5vh; }
        .mini-stat strong { font-weight: 900; color: var(--text-dark); font-size: 3.8vh; margin-left: 0.5vw;}

        /* Area Chart */
        .area-chart { display: flex; flex-direction: column; justify-content: space-between; gap: 1.5vh; width: 100%; flex: 1; padding: 0.5vh 0; min-height: 0;}
        .chart-group { display: flex; align-items: stretch; width: 100%; flex: 1; min-height: 0;}
        .group-name { width: 25%; text-align: right; padding-right: 1vw; font-size: 1.8vh; font-weight: 800; color: var(--text-dark); display: flex; align-items: center; justify-content: flex-end; line-height: 1.1;}
        .bar-container { flex: 1; border-left: 0.3vh solid #94a3b8; padding-left: 1vw; display: flex; flex-direction: column; justify-content: center; gap: 0.8vh; min-height: 0;}
        .bar-row { display: flex; align-items: center; width: 100%; flex: 1; cursor: pointer; min-height: 0;}
        .bar-label { width: 20%; font-size: 1.6vh; font-weight: bold; color: var(--text-dark); text-align: left; white-space: nowrap;}
        .bar-track { flex: 1; height: 1.5vh; display: flex; align-items: center; background: #e2e8f0; border-radius: 1vh; overflow: hidden; margin-left: 0.5vw;}
        .bar-fill { height: 100%; transition: width 0.8s cubic-bezier(0.22, 1, 0.36, 1); border-radius: 0 1vh 1vh 0;}
        .bg-main { background: linear-gradient(90deg, #2563eb, #60a5fa); }
        .bg-broad { background: linear-gradient(90deg, #475569, #94a3b8); }
        .bg-cabin { background: linear-gradient(90deg, #16a34a, #4ade80); }

        /* Lifts & Meetings */
        .lift-wrap { display: flex; align-items: center; justify-content: center; gap: 1.5vw; width: 100%; font-size: 2.6vh; font-weight: 900; flex: 1;}
        .lift-wrap i { font-size: 6vh; color: #64748b; }
        
        .meeting-wrap { display: flex; align-items: center; justify-content: center; gap: 1.5vw; width: 100%; font-size: 2.2vh; line-height: 1.5; font-weight: bold; flex: 1;}
        .meeting-wrap i { font-size: 6vh; color: #64748b; }
        .meeting-text { text-align: left; width: 100%;}
        .meeting-text div { background: white; padding: 0.5vh 1vw; border-radius: 0.5vh; border: 0.1vh solid var(--border-color); margin-bottom: 0.5vh; display: inline-block; width: 100%;}

        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        @keyframes pulse-border { 0% { border-color: #fca5a5; box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); } 70% { border-color: #ef4444; box-shadow: 0 0 0 1.5vh rgba(239, 68, 68, 0); } 100% { border-color: #fca5a5; box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); } }

        #toast { position: fixed; bottom: -10vh; left: 50%; transform: translateX(-50%); background: rgba(15, 23, 42, 0.95); color: white; padding: 1.5vh 3vw; border-radius: 5vh; font-size: 2.2vh; font-weight: bold; transition: bottom 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); z-index: 1000; box-shadow: 0 1vh 2vh rgba(0,0,0,0.3); pointer-events: none; }
        #toast.show { bottom: 4vh; }


        /* ========================================= */
        /* MOBILE RESPONSIVENESS OVERRIDES           */
        /* ========================================= */
        @media (max-width: 1024px) {
            body { height: auto; overflow-y: auto; overflow-x: hidden; display: block; }
            .dashboard-container { height: auto; display: block; }
            
            header { height: auto; padding: 15px 10px; flex-direction: column; justify-content: center; text-align: center; gap: 10px; }
            .logo-a { font-size: 30px; margin: 0; }
            .header-title { font-size: 18px; letter-spacing: normal; line-height: 1.3;}
            .header-divider { display: none; }
            
            .grid { grid-template-columns: 1fr; height: auto; display: flex; flex-direction: column; gap: 15px; padding: 10px; }
            .column { height: auto; gap: 15px; }
            
            .col-title { font-size: 18px; padding: 12px; border-width: 2px; }
            .card { padding: 10px; border-radius: 10px; border-width: 2px; }
            
            .card-inner { padding: 15px; border-radius: 8px; gap: 15px; border-width: 2px; width: 100%; justify-content: center;}
            h4 { font-size: 16px; margin-bottom: 5px; text-align: center;}
            
            .occ-wrap { gap: 10px; flex-direction: row; }
            .occ-wrap i { font-size: 40px; }
            .occ-box { padding: 15px 5px; border-width: 2px; }
            .occ-box h2 { font-size: 28px; }
            .occ-box span { font-size: 13px; }
            
            .gauge-row { flex-direction: row; gap: 10px; width: 100%; }
            .gauge-card { padding: 10px; border-width: 2px; min-width: 0; }
            .gauge-container { justify-content: center; margin-top: 5px; }
            .canvas-wrapper { margin-bottom: -15px; }
            .gauge-val { font-size: 24px; margin-top: 0; }
            .gauge-icon { font-size: 20px; margin-top: 5px; }
            
            /* Mobile Air Quality Override */
            .aq-wrap { flex-direction: column; gap: 15px; }
            .aq-wrap i { font-size: 50px; }
            .aq-text { display: flex; flex-direction: column; gap: 10px; width: 100%; }
            .aq-text div { background: white; padding: 10px 15px; border-radius: 8px; border: 1px solid var(--border-color); font-size: 18px; justify-content: space-between; gap: 10px;}
            
            .alert-box { padding: 25px 10px; border-width: 3px; }
            .alert-box i { font-size: 60px; }
            .alert-box h3 { font-size: 24px; }
            
            .energy-wrap { flex-direction: column; text-align: center; gap: 10px; }
            .energy-wrap i { font-size: 60px; }
            .energy-text { text-align: center; }
            .energy-text h1 { font-size: 40px; }
            .energy-text h1 span { font-size: 22px !important; }
            .energy-text p { font-size: 14px; }
            
            .mini-stat { font-size: 16px; flex-direction: column; text-align: center; gap: 8px; width: 100%;}
            .mini-stat i { font-size: 40px; }
            .mini-stat strong { font-size: 24px; display: block; margin-top: 5px; margin-left: 0;}
            
            .area-chart { gap: 15px; }
            .chart-group { flex-direction: column; flex: none; height: auto; gap: 5px; background: white; padding: 10px; border-radius: 8px; border: 1px solid var(--border-color); }
            .group-name { width: 100%; text-align: left; font-size: 15px; justify-content: flex-start; border-bottom: 1px solid #eee; padding-bottom: 5px; }
            .bar-container { border-left: none; padding-left: 0; gap: 8px; margin-top: 5px;}
            .bar-row { height: auto; min-height: 25px; }
            .bar-label { width: 65px; font-size: 13px; }
            .bar-track { height: 12px; }
            
            .lift-wrap { flex-direction: column; gap: 10px; font-size: 18px;}
            .lift-wrap i { font-size: 50px; }
            
            .meeting-wrap { flex-direction: column; gap: 10px; font-size: 16px;}
            .meeting-wrap i { font-size: 50px; }
            .meeting-text { text-align: center; width: 100%; }
            .meeting-text div { padding: 10px; border-width: 2px; }
            
            #toast { font-size: 15px; padding: 15px; width: 90%; text-align: center; border-radius: 10px; bottom: -100px; }
            #toast.show { bottom: 20px; }
        }
    </style>
</head>
<body>

    <div class="dashboard-container">
        
        <header>
            <div class="logo-a">A</div>
            <div class="header-title">ASTRO OFFICE BUILDING <span class="header-divider">|</span> BUILDING MANAGEMENT DASHBOARD</div>
        </header>

        <div class="grid">
            
            <div class="column">
                <div class="col-title">INDOOR ENVIRONMENT & AIR QUALITY</div>
                
                <div class="card card-inner interactive" onclick="refreshOccupancy()">
                    <h4>OCCUPANCY</h4>
                    <div class="occ-wrap">
                        <i class="fa-solid fa-users"></i>
                        <div class="occ-box">
                            <h2 id="occ-current">1500</h2>
                            <span>Current</span>
                        </div>
                        <div class="occ-box">
                            <h2 id="occ-avg">85%</h2>
                            <span>Average</span>
                        </div>
                    </div>
                </div>

                <div class="gauge-row">
                    <div class="gauge-card interactive" onclick="refreshTemp()">
                        <h4>TEMPERATURE</h4>
                        <div class="gauge-container">
                            <div class="canvas-wrapper"><canvas id="tempChart"></canvas></div>
                            <div class="gauge-val" id="temp-val">26°C</div>
                            <i class="fa-solid fa-temperature-half gauge-icon" style="color: #94a3b8;"></i>
                        </div>
                    </div>
                    <div class="gauge-card interactive" onclick="refreshHumid()">
                        <h4>HUMIDITY</h4>
                        <div class="gauge-container">
                            <div class="canvas-wrapper"><canvas id="humidChart"></canvas></div>
                            <div class="gauge-val" id="humid-val">55%</div>
                            <i class="fa-solid fa-droplet gauge-icon" style="color: var(--blue-icon);"></i>
                        </div>
                    </div>
                </div>

                <div class="card card-inner interactive" onclick="refreshAir()">
                    <h4>AIR QUALITY</h4>
                    <div class="aq-wrap">
                        <i class="fa-solid fa-wind"></i>
                        <div class="aq-text">
                            <div><span>INDOOR</span> <span class="aq-val-in" id="aq-in">1.5 PPM</span></div>
                            <div><span>OUTDOOR</span> <span class="aq-val-out" id="aq-out">82 PPM</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="column">
                <div class="col-title">ENERGY & SUSTAINABILITY TODAY</div>
                
                <div class="card card-inner alert-box interactive" onclick="showToast('Alert Acknowledged. Maintenance Team Dispatched.', 'var(--red-alert)')">
                    <i class="fa-solid fa-triangle-exclamation"></i>
                    <h3>HIGHER THAN USUAL</h3>
                </div>

                <div class="card card-inner interactive" onclick="refreshEnergy()">
                    <div class="energy-wrap">
                        <i class="fa-solid fa-bolt"></i>
                        <div class="energy-text">
                            <h1 id="energy-val">22,590 <span style="font-size: 4vh;">kWh</span></h1>
                            <p>TOTAL ENERGY USED TODAY</p>
                        </div>
                    </div>
                </div>

                <div class="card card-inner interactive" onclick="showToast('Fetching latest Solar Grid input...', 'var(--blue-icon)')">
                    <div class="mini-stat">
                        <i class="fa-solid fa-solar-panel" style="color: #64748b;"></i>
                        <span>SOLAR POWERING: <strong>8%</strong></span>
                    </div>
                </div>

                <div class="card card-inner interactive" onclick="showToast('Sustainability goals calculated.', 'var(--green-icon)')">
                    <div class="mini-stat">
                        <i class="fa-solid fa-tree" style="color: var(--green-icon);"></i>
                        <span>TREES SAVED: <strong id="trees-val">280</strong></span>
                    </div>
                </div>
            </div>

            <div class="column">
                <div class="col-title">AREA USAGE & FACILITY STATUS</div>
                
                <div class="card card-inner interactive" style="align-items: flex-start;" onclick="randomizeBars()">
                    <h4>ENERGY USAGE BY AREA</h4>
                    <div class="area-chart">
                        <div class="chart-group">
                            <div class="group-name">Main<br>Building</div>
                            <div class="bar-container">
                                <div class="bar-row"><div class="bar-label">Ground</div><div class="bar-track"><div class="bar-fill bg-main" id="bar1" style="width: 100%;"></div></div></div>
                                <div class="bar-row"><div class="bar-label">1st</div><div class="bar-track"><div class="bar-fill bg-main" id="bar2" style="width: 65%;"></div></div></div>
                                <div class="bar-row"><div class="bar-label">2nd</div><div class="bar-track"><div class="bar-fill bg-main" id="bar3" style="width: 85%;"></div></div></div>
                                <div class="bar-row"><div class="bar-label">3rd Floor</div><div class="bar-track"><div class="bar-fill bg-main" id="bar4" style="width: 75%;"></div></div></div>
                            </div>
                        </div>
                        <div class="chart-group">
                            <div class="group-name">Broadcast<br>Building</div>
                            <div class="bar-container">
                                <div class="bar-row"><div class="bar-track"><div class="bar-fill bg-broad" id="bar5" style="width: 70%;"></div></div></div>
                            </div>
                        </div>
                        <div class="chart-group">
                            <div class="group-name">Cabin 3</div>
                            <div class="bar-container">
                                <div class="bar-row"><div class="bar-label">Level 1</div><div class="bar-track"><div class="bar-fill bg-cabin" id="bar6" style="width: 45%;"></div></div></div>
                                <div class="bar-row"><div class="bar-label">Level 2</div><div class="bar-track"><div class="bar-fill bg-cabin" id="bar7" style="width: 60%;"></div></div></div>
                                <div class="bar-row"><div class="bar-label">Level 3</div><div class="bar-track"><div class="bar-fill bg-cabin" id="bar8" style="width: 45%;"></div></div></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card card-inner interactive" onclick="showToast('Opening Lift 1 Service Log...', '#f59e0b')">
                    <h4>LIFT STATUS</h4>
                    <div class="lift-wrap">
                        <i class="fa-solid fa-elevator"></i>
                        <div>Lift 1 (Cabin 3): <br><span style="color: var(--orange-warn);">MAINTENANCE</span></div>
                    </div>
                </div>

                <div class="card card-inner interactive" onclick="showToast('Checking room booking system...', '#3b82f6')">
                    <h4>AVAILABLE MEETING ROOMS</h4>
                    <div class="meeting-wrap">
                        <i class="fa-solid fa-people-roof"></i>
                        <div class="meeting-text">
                            <div>CMS 1, 3, 5, 7, 9</div>
                            <div>Cabin 3: Level3 Room1, Level3 Room2</div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div id="toast">Data Refreshed!</div>

    <script>
        const gaugeOptions = {
            rotation: -90,
            circumference: 180,
            cutout: '78%',
            plugins: { tooltip: { enabled: false }, legend: { display: false } },
            maintainAspectRatio: true,
            aspectRatio: 1.8, 
            responsive: true,
            layout: { padding: 0 },
            animation: { duration: 1200, easing: 'easeOutQuart' }
        };

        const tempChart = new Chart(document.getElementById('tempChart'), {
            type: 'doughnut',
            data: { datasets: [{ data: [60, 40], backgroundColor: ['#22c55e', '#e2e8f0'], borderWidth: 0, borderRadius: 20 }] },
            options: gaugeOptions
        });

        const humidChart = new Chart(document.getElementById('humidChart'), {
            type: 'doughnut',
            data: { datasets: [{ data: [55, 45], backgroundColor: ['#3b82f6', '#e2e8f0'], borderWidth: 0, borderRadius: 20 }] },
            options: gaugeOptions
        });

        let toastTimeout;
        function showToast(message, color = '#1e293b') {
            const toast = document.getElementById('toast');
            toast.innerText = message;
            toast.style.backgroundColor = color;
            toast.classList.add('show');
            clearTimeout(toastTimeout);
            toastTimeout = setTimeout(() => { toast.classList.remove('show'); }, 3000);
        }

        function getRnd(min, max) { return Math.floor(Math.random() * (max - min + 1) ) + min; }

        function refreshOccupancy() {
            let occ = getRnd(1300, 1600);
            document.getElementById('occ-current').innerText = occ;
            document.getElementById('occ-avg').innerText = getRnd(75, 95) + '%';
            document.getElementById('occ-current').style.color = occ > 1550 ? 'var(--orange-warn)' : 'var(--text-dark)';
            showToast('Live Occupancy Updated', 'var(--blue-icon)');
        }

        function refreshTemp() {
            let temp = getRnd(22, 29);
            document.getElementById('temp-val').innerText = temp + '°C';
            let percent = (temp / 40) * 100;
            tempChart.data.datasets[0].data = [percent, 100 - percent];
            tempChart.data.datasets[0].backgroundColor = temp > 26 ? ['var(--orange-warn)', '#e2e8f0'] : ['#22c55e', '#e2e8f0'];
            tempChart.update();
            showToast('Sensor Data Refresh: Temperature', 'var(--green-icon)');
        }

        function refreshHumid() {
            let humid = getRnd(45, 75);
            document.getElementById('humid-val').innerText = humid + '%';
            humidChart.data.datasets[0].data = [humid, 100 - humid];
            humidChart.update();
            showToast('Sensor Data Refresh: Humidity', 'var(--blue-icon)');
        }

        function refreshAir() {
            document.getElementById('aq-in').innerText = (Math.random() * (2.5 - 0.5) + 0.5).toFixed(1) + ' PPM';
            document.getElementById('aq-out').innerText = getRnd(60, 95) + ' PPM';
            showToast('Air Quality Index Synchronized', 'var(--blue-icon)');
        }

        function refreshEnergy() {
            let currentStr = document.getElementById('energy-val').innerText.replace(/\D/g,'');
            let current = parseInt(currentStr);
            let newVal = current + getRnd(5, 20);
            
            let spanClass = window.innerWidth <= 1024 ? 'font-size: 22px;' : 'font-size: 4vh;';
            document.getElementById('energy-val').innerHTML = newVal.toLocaleString() + ` <span style="${spanClass}">kWh</span>`;
            
            if(getRnd(1,3) === 1) {
                let trees = parseInt(document.getElementById('trees-val').innerText) + 1;
                document.getElementById('trees-val').innerText = trees;
            }
            showToast('Energy Consumption Meter Read', 'var(--orange-warn)');
        }

        function randomizeBars() {
            for(let i=1; i<=8; i++) {
                document.getElementById('bar'+i).style.width = getRnd(30, 100) + '%';
            }
            showToast('Area Energy Distribution Recalculated', '#64748b');
        }
        
        window.addEventListener('resize', () => {
            tempChart.resize();
            humidChart.resize();
        });
    </script>
</body>
</html>